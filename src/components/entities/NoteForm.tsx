import React, { useMemo } from 'react' // –ò–º–ø–æ—Ä—Ç React –∏ useMemo –¥–ª—è memoization
import { v4 as uuidv4 } from 'uuid' // –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä UUID –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö id
import { Widget } from '../shared/ui/widgets' // –û–±—ë—Ä—Ç–∫–∞-–≤–∏–¥–∂–µ—Ç —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º

/**
 * –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–º–µ—Ç–∫–∏.
 * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π, –æ—Ñ–æ—Ä–º–ª–µ–Ω –∫–∞–∫ –≤–∏–¥–∂–µ—Ç.
 * @module NoteForm - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫
 * Import widget.tsx - –æ–±—ë—Ä—Ç–∫–∞-–≤–∏–¥–∂–µ—Ç —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º
 * UseMemo –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ id –¥–ª—è –ø–æ–ª—è –≤–≤–æ–¥–∞
 * uuidv4() - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π id –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã–∑–æ–≤–∞
 * props.value - —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—è
 * props.onChange - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
 * props.onSubmit - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
 */

// –ü—Ä–æ–ø—Å—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Ñ–æ—Ä–º—ã
interface Props {
  value: string 
  onChange: (value: string) => void 
  onSubmit: (e: React.FormEvent<HTMLFormElement>) => void
}

/**
 * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫ —Å –æ–±—ë—Ä—Ç–∫–æ–π Widget.
 * @module NoteForm - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫
 */
export default function NoteForm({ value, onChange, onSubmit }: Props) {
  // –°—Ç–∞–±–∏–ª—å–Ω—ã–π id –¥–ª—è –ø–æ–ª—è –≤–≤–æ–¥–∞ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –º–∞—É–Ω—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)
  const textareaId = useMemo(() => `note-input-${uuidv4()}`, [])

  return (
    // –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º —Ñ–æ—Ä–º—É –≤ Widget —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º
    <Widget title="üìù">
      {/* –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ –≤–≤–µ—Ä—Ö —á–µ—Ä–µ–∑ onSubmit */}
      <form className="note-form" onSubmit={onSubmit}>
        {/* –Ø–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å—å + –ø—Ä–∏–≤—è–∑–∫–∞ –∫ textarea —á–µ—Ä–µ–∑ htmlFor –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ */}
        <label className="note-form__label" htmlFor={textareaId}>–ù–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞</label>
        {/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å textarea –∏ –∫–Ω–æ–ø–∫–æ–π */}
        <div className="note-form__controls">
          {/* –¢–µ–∫—Å—Ç–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å –¥–ª—è –≤–≤–æ–¥–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∑–∞–º–µ—Ç–∫–∏ */}
          <textarea
            id={textareaId} // –ü—Ä–∏–≤—è–∑–∫–∞ id –∫ label
            className="note-form__textarea"
            value={value}
            onChange={(e) => onChange(e.target.value)}
            placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç..."
            rows={3}
          />
          {/* –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã */}
          <button type="submit" className="btn">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
      </form>
    </Widget>
  )
}
